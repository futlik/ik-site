"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["65103"],{416722:function(b,v,t){t.d(v,{Z:()=>j});var O=t(392338),E=t(675523),P=t.n(E),I=t(668595),y=t.n(I),R=t(910575),g=t.n(R),c=t(892232),C=t.n(c),L=t(590670),o=t.n(L),s=t(20104),r=t.n(s),n=t(848664),i=t.n(n),e=t(642979),u=t.n(e),S=t(898173);const M=`
attribute vec3 aPosition;

uniform mat3 uvMatrix;
uniform float uAmount;
uniform vec2 uAngle;
uniform float uZoomStart;
uniform float uZoomEnd;
uniform float uProgress;
uniform vec2 uOrigin;

varying vec2 vUv;

void main(){
  gl_Position = vec4(aPosition, 1.);
  vec2 uv = gl_Position.xy * .5 + .5;

  vUv = (uvMatrix * vec3(uv, 1.)).xy;
  vUv -= uOrigin;
  vUv *= 1.0 - uAmount - mix(uZoomStart, uZoomEnd, uProgress);
  vUv -= uAngle * mix(
    (vec2(1.0) - uOrigin) * -uAmount,
    uOrigin * uAmount,
    uProgress
  );
  vUv += uOrigin;
}
`;function D(h,m){var l=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);m&&(f=f.filter(function(d){return Object.getOwnPropertyDescriptor(h,d).enumerable})),l.push.apply(l,f)}return l}function x(h){for(var m=1;m<arguments.length;m++){var l=arguments[m]!=null?arguments[m]:{};m%2?D(Object(l),!0).forEach(function(f){u()(h,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(l)):D(Object(l)).forEach(function(f){Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(l,f))})}return h}function z(h){var m=A();return function(){var f=i()(h),d;if(m){var a=i()(this).constructor;d=Reflect.construct(f,arguments,a)}else d=f.apply(this,arguments);return r()(this,d)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=function(h){o()(l,h);var m=z(l);function l(f,d){var a;return P()(this,l),a=m.call(this,f,x({programKey:"parallax-program",vert:M,uniforms:{uOrigin:[.5,.5],uProgress:0}},d)),u()(g()(a),"targetProgress",0),u()(g()(a),"isImmediate",!0),u()(g()(a),"onIntersection",function(p){p&&(a.isImmediate=!0)}),u()(g()(a),"onScrollProgress",function(p){a.isImmediate&&(a.uniforms.uProgress=p,a.isDirty=!0,a.isImmediate=!1),a.targetProgress=p}),a.autoUpdate=!1,a}return y()(l,[{key:"getUniformsFromProps",value:function(){var d=this.props,a=d.intensity,p=d.rotation,W=d.zoomStart,T=d.zoomEnd,U=d.focalPoint;return{uAmount:a*.01*.5,uAngle:[Math.cos(p*Math.PI/180),Math.sin(p*Math.PI/180)],uZoomStart:W*.01,uZoomEnd:T*.01,uOrigin:[U.x,1-U.y]}}},{key:"update",value:function(){var d=this.uniforms.uProgress,a=this.targetProgress;if(this.props.scrollProgress>=0&&(a=this.props.scrollProgress*.01),d!==a){var p=a-d;p<.01?this.uniforms.uProgress=a:this.uniforms.uProgress=d+p*.1,this.isDirty=!0}}},{key:"onRefresh",value:function(){C()(i()(l.prototype),"onRefresh",this).call(this),this.isImmediate=!0}}]),l}(S.Z);u()(j,"defaultProps",{intensity:0,rotation:0,zoomStart:0,zoomEnd:0,scrollProgress:-1})},536040:function(b,v,t){t.d(v,{Z:()=>s});var O=t(392338),E=t.n(O),P=t(675523),I=t.n(P),y=t(668595),R=t.n(y),g=t(642979),c=t.n(g),C=t(749189);function L(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);n&&(e=e.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),i.push.apply(i,e)}return i}function o(r){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?L(Object(i),!0).forEach(function(e){c()(r,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}var s=function(){function r(n,i,e){var u=this,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};I()(this,r),c()(this,"isPaused",!1),c()(this,"isIntersecting",!1),c()(this,"onIntersection",function(M){u.isIntersecting=M,u.updatePlayState(),u.instance.onIntersection&&u.instance.onIntersection(M),u.isIntersecting&&u.isPaused&&u.instance.renderFrame()}),c()(this,"setPaused",function(M){u.isPaused=M,u.updatePlayState()}),c()(this,"togglePaused",function(){u.setPaused(!u.isPaused)}),c()(this,"onResize",function(){u.instance.refresh()}),this.instance=new n(i,e),this.node=i,this.options=o(o({},r.defaultOptions),S),this.options.reduceMotion===!0&&(this.isPaused=!0),this.bindListeners()}return R()(r,[{key:"bindListeners",value:function(){this.intersectionScroll=new C.Z(this.node,{onIntersection:this.onIntersection,onProgress:this.instance.onScrollProgress,normalize:this.options.normalizeScroll,windowRef:this.options.scrollWindowRef}),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.node)}},{key:"unbindListeners",value:function(){this.intersectionScroll.destroy(),this.resizeObserver.disconnect()}},{key:"detach",value:function(){this.unbindListeners(),this.instance.detach(),this.node=null}},{key:"attach",value:function(i){this.node=i,this.bindListeners(),this.instance.attach(i)}},{key:"updatePlayState",value:function(){if(this.isIntersecting&&!this.isPaused){this.instance.start();return}this.instance.stop()}},{key:"setProps",value:function(i){this.instance.setProps(i)}},{key:"refresh",value:function(){this.instance.refresh()}},{key:"destroy",value:function(){this.unbindListeners(),this.instance.destroy()}},{key:"props",get:function(){return this.instance.props}},{key:"autoUpdate",get:function(){return this.instance.autoUpdate}},{key:"isSupported",get:function(){return this.instance.isSupported}}]),r}();c()(s,"defaultOptions",{scrollWindowRef:window,normalizeScroll:!0,reduceMotion:!1})},867384:function(b,v,t){t.d(v,{Z:()=>L});var O=t(536040),E=t(328957),P=t(175424);const I=(o,s)=>(o.addEventListener?o.addEventListener("change",s):o.addListener(s),s),y=(o,s)=>(o.removeEventListener?o.removeEventListener("change",s):o.removeListener(s),s),R=(o,s)=>{const r=window.matchMedia(o),n={},i=I(r,e=>{n.matches=e.matches,s==null||s(n.matches)});return n.matches=r.matches,n.destroy=()=>{y(r,i)},n},g=o=>R("(prefers-reduced-motion: reduce)",o);function c(o,s,r){return s in o?Object.defineProperty(o,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[s]=r,o}const C=o=>!!(o.complete&&o.src);class L{prepareImage(){this.image.addEventListener("load",this.onImageLoaded),this.image.style.visibility="hidden",C(this.image)&&this.onImageLoaded()}getFocalPoint(){if(this.effectProps.focalPoint)return this.effectProps.focalPoint;const[s,r]=window.getComputedStyle(this.image).objectPosition.split(" ");return{x:parseFloat(s)/100,y:parseFloat(r)/100}}destroyComponent(){var s;(s=this.component)===null||s===void 0||s.destroy(),this.component=null,this.image&&(this.image.style.visibility="",this.image.removeEventListener("load",this.onImageLoaded))}removeListeners(){this.prefersReducedMotionHandler.destroy()}constructor({image:s,container:r,effectProps:n,WebGLComponent:i}){c(this,"currentImageSrc",""),c(this,"onPrefersReducedMotionChange",e=>{if(e){this.destroyComponent();return}this.prepareImage()}),c(this,"onContainerResize",()=>{var e;(e=this.component)===null||e===void 0||e.refresh()}),c(this,"onImageLoaded",()=>{var e;if(this.currentImageSrc=this.image.src,this.component){this.component.setProps({image:this.image,imageNeedsUpdate:!0});return}this.component=new O.Z(this.WebGLComponent,this.container,{image:this.image,pixelRatio:((e=window)===null||e===void 0?void 0:e.devicePixelRatio)||1,...this.effectProps,focalPoint:this.getFocalPoint()},{scrollWindowRef:(0,P.V6)()||window,normalizeScroll:!1})}),c(this,"updateImage",e=>{this.component&&(this.image===e&&this.currentImageSrc===e.src||(this.image.removeEventListener("load",this.onImageLoaded),this.image=e,this.image.addEventListener("load",this.onImageLoaded),C(this.image)&&this.component.setProps({image:this.image,imageNeedsUpdate:!0})))}),c(this,"updateProps",e=>{this.component&&this.component.setProps(e)}),c(this,"getType",()=>this.component.props.type),c(this,"destroy",()=>{this.destroyComponent(),this.removeListeners()}),this.image=s,this.container=r,this.effectProps=n,this.WebGLComponent=i,E.Z&&(this.prefersReducedMotionHandler=g(this.onPrefersReducedMotionChange),!this.prefersReducedMotionHandler.matches&&this.prepareImage())}}},335002:function(b,v,t){t.r(v),t.d(v,{default:()=>P});var O=t(416722),E=t(867384);class P extends E.Z{constructor(y){super({...y,WebGLComponent:O.Z})}}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/68b38d212dc4b4e5/image-effect-parallax-bd5b7cbac582c6a7-min.de-DE.js.map